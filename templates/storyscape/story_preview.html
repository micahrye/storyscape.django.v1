{% extends "base.html" %}
{% load json_filters %}

{% block title %}StoryScape - {{ story.title|title }}{% endblock %}
{% block pagename %}PREVIEW_STORY{% endblock %}


{% block content %}
	
	<div class="preview-navigation">
		<a href="{% url stories_library %}">Browse Stories</a>
		&nbsp;&raquo;&nbsp;
		{% if from_page == "edit" %}
		<a href="{% url edit_story story.id %}">Edit</a>
		&nbsp;&raquo;&nbsp;
		{% endif %}
		Preview
		
		{% if story.creator_uid == request.user.id %}
		<span class="pull-right">
			<a href="{% url edit_story story.id %}">Edit Story</a>
		</span>
		{% endif %}
	</div>
	<h1 id="story-title-display" class="story-title-display">{{ story.title|title }}</h1>
	<div id='storyscape-container'>
	 
		{% spaceless %}
			<div> 
				<div id='builder-pane-container' class="builder-pane-container preview-container"> 
					<div class="builder-container">
						<div id="builder-pane" class="builder-pane">
						</div>
						{% include "storyscape/storyline_navigation.html" %} 
					</div>
				</div>
			</div>
		{% endspaceless %}
	</div>
	<div class="preview-controls">
		<button class="btn btn-large btn-success" id="make-sound">Simulate Sound</button>
	</div>

{% endblock %}

{% block extra_css %}
	<link rel="stylesheet" type='text/css' href="/static/ui-lightness/jquery-ui-1.10.3.custom.min.css">
{% endblock %}

{% block extra_javascript %}
	<script type="text/javascript">
	window.LOAD_STORY_ID = "{{ story.id }}";
	window.ACTION_CODES = {{ action_codes|jsonify|safe }};
	window.ACTION_TRIGGER_CODES = {{ action_trigger_codes|jsonify|safe }};
	
	window.IS_PREVIEW_MODE = true;
	</script>
{% endblock %}

{% block extra_javascript_libraries %}
	<script type="text/javascript" src="/static/js/jquery.actual.js"></script>
	<script type="text/javascript" src="/static/ui-lightness/jquery-ui-1.10.3.custom.js"></script>
{% endblock %}

